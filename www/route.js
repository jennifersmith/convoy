/**
 * Created by IntelliJ IDEA.
 * User: jsmith
 * Date: Sep 7, 2010
 * Time: 9:01:26 PM
 * To change this template use File | Settings | File Templates.
 */

Convoy.RouteSimulator = function(delay) {
    this.route = theRoute.slice();

    this.start = function() {
        this.doRoute();
    };
    this.doRoute = function() {
        var current = this.route.shift();
        Convoy.FakeLocation.setLocation(current.lat, current.lng);
        console.log(current);
        if(this.route.length > 0){
            var that = this;
            this.timeout = setTimeout(function() {
                that.doRoute();
            }, delay);
        }
    };
    this.stop = function(){
        if(this.timeout)
        {
            clearTimeout(this.timeout);
        }
    }
};
var theRoute = [
    {"lat":51.431087694985834,"lng":0.368640579223638},
    {"lat":51.4330140723985,"lng":0.3693701400756888},
    {"lat":51.43349565406006,"lng":0.3650356903076224},
    {"lat":51.42841203604941,"lng":0.36400572204590365},
    {"lat":51.41867131426709,"lng":0.3595854415893607},
    {"lat":51.415834340109555,"lng":0.359027542114263},
    {"lat":51.419474199513765,"lng":0.3467108383178763},
    {"lat":51.42324757126163,"lng":0.33748403930664583},
    {"lat":51.42867960899414,"lng":0.3255964889526419},
    {"lat":51.430311770025455,"lng":0.31293646240234896},
    {"lat":51.43047230730534,"lng":0.30147806549072786},
    {"lat":51.430820136143225,"lng":0.2881313934326224},
    {"lat":51.43052581960659,"lng":0.274183906555181},
    {"lat":51.4277698545891,"lng":0.2596785202026419},
    {"lat":51.427448760474384,"lng":0.24916426086426302},
    {"lat":51.42637843046261,"lng":0.23830667877197786},
    {"lat":51.43202413859582,"lng":0.2391220703125052},
    {"lat":51.43713410697922,"lng":0.23882166290283724},
    {"lat":51.44582776560441,"lng":0.23581758880615755},
    {"lat":51.45112339873952,"lng":0.23967996978760286},
    {"lat":51.4559103364529,"lng":0.24633184814453646},
    {"lat":51.4619534626603,"lng":0.2549149169921927},
    {"lat":51.46984041031866,"lng":0.2622105255127005},
    {"lat":51.47764580929591,"lng":0.2665449752807669},
        {"lat":51.485850730394084,"lng":0.267317451477056},
        {"lat":51.49394729958284,"lng":0.26873365783691927},
        {"lat":51.500065534862486,"lng":0.26830450439453646},
        {"lat":51.50607610156056,"lng":0.2675320281982474},
        {"lat":51.51339456559729,"lng":0.2681757583618216},
        {"lat":51.520097674310726,"lng":0.27178064727783724},
        {"lat":51.52453026404024,"lng":0.27517095947266146},
        {"lat":51.52896242232353,"lng":0.2776171340942435},
        {"lat":51.535316209814475,"lng":0.2803637161254935},
        {"lat":51.54073491601756,"lng":0.2819515838623099},
        {"lat":51.545992846608776,"lng":0.28315321350098177},
        {"lat":51.551650448567194,"lng":0.28620020294189974},
        {"lat":51.55685375372105,"lng":0.28959051513672396},
        {"lat":51.56253668381427,"lng":0.29006258392334505},
        {"lat":51.56811220196717,"lng":0.28774515533447786},
        {"lat":51.574513867548326,"lng":0.28388277435303255},
        {"lat":51.5811279749267,"lng":0.27911917114258333},
        {"lat":51.58648789608276,"lng":0.27268186950684115},
        {"lat":51.59507311874548,"lng":0.26899114990234896},
        {"lat":51.60133770742372,"lng":0.2679611816406302},
        {"lat":51.60704173005093,"lng":0.2643562927246146},
        {"lat":51.61378434649517,"lng":0.25684610748291536},
        {"lat":51.617781472283056,"lng":0.25118128204346224},
        {"lat":51.62081905245264,"lng":0.24375692749023958},
        {"lat":51.62460242058558,"lng":0.23581758880615755},
        {"lat":51.63022360329566,"lng":0.22560373687744661},
        {"lat":51.63576418229213,"lng":0.21792189025879427},
        {"lat":51.641197554316705,"lng":0.21174208068848177},
        {"lat":51.646257462382295,"lng":0.2052618637085013},
        {"lat":51.651050538634465,"lng":0.19624964141846224},
        {"lat":51.655017757276234,"lng":0.18483415985107943},
        {"lat":51.65773337116685,"lng":0.17492071533203646},
        {"lat":51.662471993895316,"lng":0.16672388458252474},
        {"lat":51.66625188815921,"lng":0.16093031311035677},
        {"lat":51.67019116065405,"lng":0.14934317016602083},
        {"lat":51.674981706097405,"lng":0.13968721771240755},
        {"lat":51.678254954079954,"lng":0.13054624938965365},
        {"lat":51.679292763797605,"lng":0.12496725463867708},
        {"lat":51.683536891896544,"lng":0.10818735504150911},
        {"lat":51.68992229114193,"lng":0.09153620147705599},
        {"lat":51.68641043301241,"lng":0.05789057159424349},
        {"lat":51.67810859438556,"lng":0.02149835968018099},
        {"lat":51.68183396665271,"lng":-0.028798423767084635},
        {"lat":51.68289830243576,"lng":-0.06416066741942839},
        {"lat":51.689496625878895,"lng":-0.08990987396239714},
        {"lat":51.6885388644018,"lng":-0.11874898529052214},
        {"lat":51.685239753092496,"lng":-0.14981969451903776},
        {"lat":51.68343046094521,"lng":-0.18604024505614714},
        {"lat":51.68385618324941,"lng":-0.21367772674560026},
        {"lat":51.68662328065459,"lng":-0.22964223480224089},
        {"lat":51.71173227684331,"lng":-0.2208875045776315},
        {"lat":51.74022899017641,"lng":-0.23891194915770964},
        {"lat":51.76297093117809,"lng":-0.23839696502685026},
        {"lat":51.78527665821427,"lng":-0.224320732116694},
        {"lat":51.812877999439905,"lng":-0.22655233001708464},
        {"lat":51.83155239525065,"lng":-0.2085278854370065},
        {"lat":51.863047887369966,"lng":-0.19633992767333464},
        {"lat":51.888376743584395,"lng":-0.20749791717528776},
        {"lat":51.903736669486904,"lng":-0.22380574798583464},
        {"lat":51.926502067970986,"lng":-0.22071584320067839},
        {"lat":51.94375372476735,"lng":-0.2126477584838815},
        {"lat":51.96459503463792,"lng":-0.20131810760497526}
    ];